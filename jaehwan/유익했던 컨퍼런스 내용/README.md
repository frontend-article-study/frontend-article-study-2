# 동적 컨텐츠 가속화 (원티드 하이파이브)

**결론 부터**

### 설계

**AS-IS :** 유저 기기 ↔ ALB → 백엔드 Or 프론트(NextJS)

**TO-BE :** 유저 기기 ↔ 클라우드 프론트(cache x) → ALB →백엔드 Or 프론트(NextJS)

### 성능

- 글로벌 응답시간 평균 2200ms → 364ms 로 83% 단축
- 국내 응답시간 250ms → 200ms 20% 단축
- 초당 처리량 30% 개선
- 유저 체감 속도 10% 개선
- MSP 업체로 비용 30%~50% 할인.

### 비용

ALB : 1GB 0.126 달러

CloudFront : 1GB 0.120 달러

할인 : 베스킨 글로벌, 메가존과 같은 MSP업체를 사용한다면 비용할인이 가능하다고함.

**전송 과금 형태**

ALB → 클라이언트  (1GB 0.126 달러)

ALB →무료  CloudFront → 클라이언트 (1GB 0.120 달러)

- 이중 과금 xx

## 어떻게?

### 1. 네트워크 전송 가속

*엣지 네트워크 + AWS 네트워크를 사용한다.*

**비교**

**AS-IS :** 유저 기기 ↔ ALB → 백엔드 Or 프론트(NextJS)

- 유저 기기 → ALB :  퍼블릭 인터넷망을 사용.
- 퍼블릭 인터넷망의 경우 다양한 네트워크를 사용하고 네트워크 혼잡이 발생할 수도 있음.

**TO-BE :** 유저 기기 ↔ 클라우드 프론트(cache x) → ALB →백엔드 Or 프론트(NextJS)

- 유저 기기 → 클라우드 프론트 :  CDN(엣지 네트워크) 이므로 물리적으로 가까운 CDN 서버로 전송.
- 클라우드 프론트 → ALB : 클라우드 프론트에서 ALB까지 AWS Network 망을 이용하여 전송.

한국에서 엣지 네트워크가 많아야 효과가 있는거 아닐까? 서울에만 있으면 부산에서 서울까지 오는 네트워크망은 엣지를 사용할 필요가 없지않나?

- 전세계 엣지는 전년대비 33%증가
- 한국에는 8개가 있음. (aws 스페셜리스트가 말해줌. 2024년 6월 기준)
    - 공식블로그에는 4개로 명시되어있음.
- 8개는 한국 곳곳에 존재하므로 엣지 네트워크의 효과를 볼 수 있음.

### 2. HTTP 연결 가속

*클라우드 프론트는 HTTP3를 이용해서 1way handshake를 사용한다.*

**HTTP/3 + Edge ⇒ 강력함**

RTT 수의 차이

HTTP2 + TLS 1.2 - 3way handshake + 요청

HTTP3 + TLS 1.3 - 1way handshake + 요청

**AS-IS :** 유저 기기 ↔ ALB → 백엔드 Or 프론트(NextJS)

- 유저 → 서버 → 유저 : RTT 3번 발생.
- 유저 → 서버 : 서버의 물리적 거리를 단순하게 보면 부산 → 서울, 뉴욕 → 서울이 될 수 있음.

**TO-BE :** 유저 기기 ↔ 클라우드 프론트(cache x) → ALB →백엔드 Or 프론트(NextJS)

- 유저 → 서버 → 유저 :  RTT 1번 발생.
- 유저 → 서버 :  CDN의 경우 유저의 위치에 가까운 서버로 전송하기 때문에  서울 → 서울, 뉴욕 → 뉴욕이 될 수 있음.

**HTTP3가 1way handshake가 가능한 이유.**

- HTTP2는 네트워크가 변경되면 다시 커넥션을 실행한다.
- HTTP3의 경우 Connection ID라는 개념이 존재하기 때문

**그럼 적용하는 방법은?**

- 클라우드 프론트의 경우 HTTP3설정은 그냥 체크만하면 되기 떄문에 적용하기가 굉장히 쉬움. 간혹가다가 HTTP3를 지원하지 않는 유저가 있을 수 있기 때문에 HTTP2도 함께 적용해놓으면댐.

**ALB로 http3를 사용하면 되는거 아냐?**

2가지 문제가 있음.

1. 핸드셰이크를 위한 물리적거리가 엣지 네트워크보다 거리가 멀 수 밖에 없음.
2. ALB는 아직 http3를 지원해주지 않음.

### 3. Origin 연결 최적화

*클라우트 프론트를 사용한다면 ALB 활성 연결 개수는 단 하나.*

**AS-IS :** 유저 기기 ↔ ALB → 백엔드 Or 프론트(NextJS)

- 여러 유저 → ALB : 유저의 수만큼 활성 연결 개수가 늘어난다.
- 활성 연결 개수 : 모든 기기의 연결을 가지고 있는 것으로 리소스가 많이 드는 작업.

**TO-BE :** 유저 기기 ↔ 클라우드 프론트(cache x) → ALB →백엔드 Or 프론트(NextJS)

- 여러 유저 → 클라우트 프론트 : HTTP3를 이용해 커넥션을 재활용하기 때문에 성능 향상.
- 클라우드 프론트 → ALB : 활성 연결 개수는 하나만 존재.
- 결론 : ALB 활성 연결 개수 65% 감소.
- 사례 : 부킹닷컴도 도입했다고함.


![IMG_3270](https://github.com/user-attachments/assets/ff1eccdc-d02d-4c38-99af-2afa30ccc8b1)

    

### 중요한 클라우드 프론트 설정.

CachingDisabled를 설정해서 쓰자 (캐시사용 x)

- 엣지 로케이션에서 캐시를 줄 경우. 캐시를 한번 체크(리전엣지 확인)하고 캐시가 없을때 ALB로 전송.
- 근데 캐시를 사용하지 않는 다면 리전 엣지로 가는 과정이 없어지므로 성능이 향상.

# 100번 실패하고 살려 낸 문서 시스템 (토스 메이커스)

### 문제 인식: 기존 문서화의 실패

### 실패의 신호들

- "이 문서가 있나요?"
- "이 문서가 최신인가요?"
- "이거에 대해서 더 자세히 아시는 분 계신가요?"

이런 질문들이 계속 반복되며, 노션/컨플루언스 등 여러 도구를 써봤지만 제대로 작동하지 않았음.

### 🟢 현재 토스의 문서 시스템

### 1. **박씨**  - AI 기반 문서 검색 시스템

- 슬랙 메신저 내에서 질문하면 문서 기반으로 답변
- 참조된 문서 링크 제공
- **학습 기능**: 문서에 없는 내용을 입력하면 즉시 학습

### 2. 문서화 현황

- 프론트엔드 챕터 통합 문서 플랫폼 구축
- 트랙별 온보딩 문서 완비
- **문서화 길드**: 자발적 문서 관리 조직 운영
- 약 **2,000개**의 문서 보유

### 3. 자동화 시스템

- **자동 학습**: 학습 커맨드 없이도 자동으로 정보 업데이트
- **DRI 알림**: 오래된 문서에 대해 담당자에게 자동 알림
- **메트릭 대시보드**: 사용자 수, 뷰 수, 피드백 모니터링

### 💡 핵심 인사이트

### 1. 조직 규모별 지식 공유의 변화

- **5명**: 밥 먹으면서 자연스럽게 정보 공유
- **100명**:
    - 슬랙이 공지 채널처럼 운영
    - 질문 자체가 부담스러워짐
    - 지식이 특정 사람들에게만 편중

### 2. 좋은 문서 시스템의 2가지 조건

**신뢰성**

- 최신 정보
- 정확성
- 완결성
- 충분한 커버리지

**접근성**

- 검색 가능
- 익숙한 환경 (맥락 전환 없음)
- 메신저/에디터 내에서 바로 접근

### 🔄 문서의 선순환 구조

`작성 → 읽기 → 피드백 → 더 많은 문서 생성`

**중요한 발견**: 대부분 "작성"에만 집중하지만, **실제로는 "읽기"(접근성)가 선순환의 핵심**.

### 🎯 성공 요인

1. **접근성 우선**: 신뢰성보다 접근성이 문서 문화 정착의 시작점
2. **자동화**: 학습, 업데이트 알림 등 수동 작업 최소화
3. **커뮤니티**: 문서화 길드 같은 자발적 참여 조직
4. **통합**: 기존 업무 도구(슬랙) 내에서 모든 것이 가능

### 📊 성과

- 내부 문서 활성화 → 외부 문서(토스 프론트엔드 펀더멘털스 등)로 확장
- 개발자들이 직접 오픈소스 문서 작성

이 발표의 핵심은 **"문서를 많이 쓰게 하려면, 먼저 쉽게 찾고 읽을 수 있게 해야 한다"**는 통찰입니다.
