# AWS CloudFrontÂ 

# ê°œë…

![alt text](cloudfront01.png)(attachment:fcf3d140-06de-4b2b-917b-29c6d1f1e4f3:image.png)

CloudFrontëŠ” AWSì—ì„œ ì œê³µí•˜ëŠ” CDNì„œë¹„ìŠ¤ìž…ë‹ˆë‹¤. ì¦‰,.html, .css, .js ë° ì´ë¯¸ì§€ íŒŒì¼ê³¼ ê°™ì€ ì •ì  ë° ë™ì  ì›¹ ì½˜í…ì¸ ë¥¼ ì‚¬ìš©ìžì—ê²Œ ë” ë¹¨ë¦¬ ë°°í¬í•˜ë„ë¡ ì§€ì›í•˜ëŠ” ì›¹ ì„œë¹„ìŠ¤ìž…ë‹ˆë‹¤. ì¦‰ ê³ ì† ì½˜í…ì¸  ì „ì†¡ ë„¤íŠ¸ì›Œí¬(CDN) ì„œë¹„ìŠ¤ ìž…ë‹ˆë‹¤.

CDNì€ Clientì˜ ì½˜í…ì¸  ìš”ì²­ìœ¼ë¡œ ì„œë²„ì—ì„œ ë°›ì•„ì˜¨ ì½˜í…ì¸ ë¥¼Â **ìºì‹±í•˜ê³  ì´í›„ ê°™ì€ ìš”ì²­ì´ ì™”ì„ ë•Œ, ê·¸ ìºì‹±í•´ ë‘” ê²ƒì„ ì œê³µí•˜ëŠ” ê°œë…**ìž…ë‹ˆë‹¤. ì´ë ‡ê²Œ í•¨ìœ¼ë¡œì¨ ë¬¼ë¦¬ì ìœ¼ë¡œ ê±°ë¦¬ê°€ ë¨¼ ê³³ì—ë„ ë¹ ë¥´ê²Œ ìš”ì²­ì„ ì²˜ë¦¬í•  ìˆ˜ ìžˆê³  ê²°ê³¼ì ìœ¼ë¡œ ì„œë²„ì˜ ë¶€í•˜ë¥¼ ë‚®ì¶œ ìˆ˜ ìžˆìŠµë‹ˆë‹¤.

\*CDN(ê¸°ìˆ ì ì¸ ê°œë…)

\*CloudFront(AWSì—ì„œ ì œê³µí•˜ëŠ” CDNì„œë¹„ìŠ¤)

# **Edge Location(POP) / Regional Edge Cache(REC)**

## **Edge Location(POP)**

- CloudFrontê°€ ì „ ì„¸ê³„ì— ë¶„ì‚° ë°°ì¹˜í•œ **ìµœì „ë°© ìºì‹œ ì„œë²„**
- ì‚¬ìš©ìžì˜ ìš”ì²­ì„ ê°€ìž¥ ê°€ê¹Œìš´ ì—£ì§€ ë¡œì¼€ì´ì…˜ì´ ë°›ì•„ ì‘ë‹µ
- ì‚¬ìš©ìžê°€ ìš”ì²­í•œ ì½˜í…ì¸ ì˜ ìºì‹œê°€ Edge Locationì— ìžˆë‹¤ë©´ ë©€ë¦¬ ìžˆëŠ” ì„œë²„ì— ì§ì ‘ ìš”ì²­ì´ ì•„ë‹Œ ê°€ê¹Œìš´ Edge Locationì— ì €ìž¥ëœ ìºì‹œë¥¼ ë¶ˆëŸ¬ì˜´
- ìš”ì²­ ì‹œ ìºì‹œê°€ ì—†ìœ¼ë©´ â†’ ìƒìœ„ ê³„ì¸µ(ë¦¬ì „ ì—£ì§€ ìºì‹œ) ë˜ëŠ” ì˜¤ë¦¬ì§„ìœ¼ë¡œ ì „ë‹¬
- ì „ ì„¸ê³„ ì£¼ìš” ë„ì‹œì— 300ê°œ ì´ìƒ ë¶„í¬

## **Regional Edge Cache(REC)**

- íŠ¹ì • **ë¦¬ì „ì—ë§Œ ìžˆëŠ” ì¤‘ê°„ ìºì‹œ ê³„ì¸µ**
- Edge Locationë³´ë‹¤ í¬ê³  ì˜¤ë¦¬ì§„ê³¼ Edge Location ì‚¬ì´ì— ìœ„ì¹˜
- ì—£ì§€ ë¡œì¼€ì´ì…˜ì— ì—†ëŠ” ì½˜í…ì¸  ìš”ì²­ì´ ìžˆì„ ë•Œ, ì˜¤ë¦¬ì§„ê¹Œì§€ ê°€ì§€ ì•Šê³  **ë¦¬ì „ ì—£ì§€ ìºì‹œ**ì—ì„œ ë¨¼ì € í™•ì¸
- **ë” ê¸´ TTL ìºì‹±** â†’ ì˜¤ë¦¬ì§„ ë¶€í•˜ ì¤„ì´ê³ , ìžì£¼ ìš”ì²­ë˜ì§€ ì•ŠëŠ” ê°ì²´ë¼ë„ ì¼ì • ê¸°ê°„ ì €ìž¥
- ì—£ì§€ ë¡œì¼€ì´ì…˜ê³¼ ì˜¤ë¦¬ì§„ ì‚¬ì´ì—ì„œ ì™„ì¶© ì—­í• ì„ í•˜ëŠ” ì¤‘ê°„ ìºì‹œ ì„œë²„

# ë™ìž‘ ìˆœì„œ

![alt text](cloudfront02.png)(attachment:bebe3d25-bdc5-4ac0-8147-3cf64d8af062:image.png)

1. ì‚¬ìš©ìžê°€ ì–´í”Œë¦¬ì¼€ì´ì…˜ì— ìš”ì²­ì„ í•œë‹¤.
2. DNSëŠ” ì‚¬ìš©ìžì—ê²Œ ì í•©í•œ Edge Locationìœ¼ë¡œ ë¼ìš°íŒ… í•œë‹¤.
3. Edge Locationì—ì„œ ìºì‹œë¥¼ í™•ì¸í•˜ê³  ìžˆìœ¼ë©´ ì´ê²ƒì„ ì‚¬ìš©ìžì—ê²Œ ë°˜í™˜í•œë‹¤.

### Edge Location, RECì— ìºì‹œê°€ ì—†ëŠ” ê²½ìš°

1. ê°€ìž¥ ê°€ê¹Œìš´ RECë¡œ ìºì‹œê°€ ìžˆëŠ”ì§€ ìš”ì²­í•œë‹¤.
2. CloudFrontëŠ” ì˜¤ë¦¬ì§„ìœ¼ë¡œ ìš”ì²­ì„ ì „ë‹¬í•œë‹¤.
3. ì˜¤ë¦¬ì§„ì€ 'ì˜¤ë¦¬ì§„ > REC > Edge Location > CloudFrontê°€ ì‚¬ìš©ìžì—ê²Œ ì „ë‹¬' ìˆ˜ìˆœì„ ë°ŸëŠ”ë‹¤. (ìºì‹œë„ ì¶”ê°€ëœë‹¤.)

### RECì— ìºì‹œê°€ ì¡´ìž¬í•˜ëŠ” ê²½ìš°

1. RECëŠ” ì½˜í…ì¸ ë¥¼ ìš”ì²­í•œ Edge Locationìœ¼ë¡œ ë°˜í™˜í•œë‹¤.
2. RECë¡œë¶€í„° ì½˜í…ì¸ ì˜ ì²« ë²ˆì§¸ ë°”ì´íŠ¸ê°€ ë„ì°©í•˜ëŠ” ì¦‰ì‹œ Edge Locationì€ ì´ë¥¼ ì‚¬ìš©ìžì—ê²Œ ë°˜í™˜í•œë‹¤.
3. Edge Locationì€ ë‚˜ì¤‘ì„ ìœ„í•´ ì´ ì½˜í…ì¸  ìºì‹œë¥¼ ì €ìž¥í•œë‹¤.

# ìž¥ì 

- AWS ë„¤íŠ¸ì›Œí¬ë¥¼ ì‚¬ìš©í•˜ë©´ ì‚¬ìš©ìžì˜ ìš”ì²­ì´ ë°˜ë“œì‹œ í†µê³¼í•´ì•¼ í•˜ëŠ” ë„¤íŠ¸ì›Œí¬ì˜ ìˆ˜ê°€ ì¤„ì–´ë“¤ì–´ ì„±ëŠ¥ì´ í–¥ìƒ
- íŒŒì¼ì˜ ì²« ë°”ì´íŠ¸ë¥¼ ë¡œë“œí•˜ëŠ” ë° ê±¸ë¦¬ëŠ” ì§€ì—° ì‹œê°„ì´ ì¤„ì–´ë“¤ê³  ë°ì´í„° ì „ì†¡ ì†ë„ê°€ ë¹¨ë¼ì§„ë‹¤.
- íŒŒì¼(ê°ì²´)ì˜ ì‚¬ë³¸ì´ ì „ ì„¸ê³„ ì—¬ëŸ¬Â ì—£ì§€ ë¡œì¼€ì´ì…˜ì— ìœ ì§€(ë˜ëŠ” ìºì‹œ)ë˜ë¯€ë¡œÂ ì•ˆì •ì„±ê³¼ ê°€ìš©ì„±ì´ í–¥ìƒ
- ë³´ì•ˆì„± í–¥ìƒ
  - CloudFrontëŠ” ê¸°ë³¸ì ìœ¼ë¡œ HTTPS(TLS)ë¥¼ ì‚¬ìš©í•´ í´ë¼ì´ì–¸íŠ¸ â†” ì—£ì§€ ë¡œì¼€ì´ì…˜ â†” ì˜¤ë¦¬ì§„ ì„œë²„ ê°„ í†µì‹ ì„ ì•”í˜¸í™”
  - ì˜¤ë¦¬ì§„ ì„œë²„ì— ëŒ€í•œ ì¢…ë‹¨ ê°„ ì—°ê²°ì˜ ë³´ì•ˆì´ ë³´ìž¥ë¨(https)
  - ì„œëª…ëœ URL ë° ì¿ í‚¤ ì‚¬ìš© ì˜µì…˜ìœ¼ë¡œ ìžì²´ ì‚¬ìš©ìž ì§€ì • ì˜¤ë¦¬ì§„ì—ì„œ í”„ë¼ì´ë¹— ì½˜í…ì¸ ë¥¼ ì œê³µí•˜ë„ë¡ í•  ìˆ˜ ìžˆìŒ

![alt text](cloudfront03.jpg)(attachment:75484799-36b1-43a5-87dd-1e9857ea60b4:image.png)

# **CloudFrontì˜ Static(ì •ì ) / Dynamic(ë™ì ) ì½˜í…ì¸  ì²˜ë¦¬**

**CloudFrontëŠ” ë‹¤ë¥¸ CDNê³¼ ë‹¤ë¥´ê²Œ 'ì •ì ' ì½˜í…ì¸ ì™€ 'ë™ì ' ì½˜í…ì¸ ë¥¼ ëª¨ë‘ ì²˜ë¦¬í•©ë‹ˆë‹¤.**

### ì •ì  ì½˜í…ì¸ 

ì´ë¯¸ì§€, JS, CSS, ë™ì˜ìƒ ê°™ì€ íŒŒì¼ì€ ëŒ€í‘œì ìœ¼ë¡œ ìºì‹±ë©ë‹ˆë‹¤. ì‚¬ìš©ìžê°€ ì„œìš¸ì—ì„œ CloudFrontë¡œ ì ‘ê·¼í•˜ë©´ ì„œìš¸ ì—£ì§€ ì„œë²„ì— í•œ ë²ˆ ìºì‹œëœ í›„ ê·¸ ë‹¤ìŒ ì‚¬ìš©ìžë“¤ì€ ì˜¤ë¦¬ì§„ê¹Œì§€ ê°€ì§€ ì•Šê³  ì—£ì§€ì—ì„œ ê³§ë°”ë¡œ ë°›ìŠµë‹ˆë‹¤.

### ë™ì  ì½˜í…ì¸ 

API ì‘ë‹µë„ ìºì‹±í•  ìˆ˜ ìžˆì§€ë§Œ, ë³´í†µì€ ë°ì´í„°ê°€ ìžì£¼ ë°”ë€Œê¸° ë•Œë¬¸ì— ì •ì  ìºì‹±í•œë‹¤ë©´ TTL(time-to-live) ì‹œê°„ ë™ì•ˆ ì‚¬ìš©ìžëŠ” ìƒˆë¡­ê²Œ ì¶”ê°€/ìˆ˜ì •ëœ ë°ì´í„°ë¥¼ ë³¼ ìˆ˜ ì—†ê²Œ ë©ë‹ˆë‹¤. ê·¸ëž˜ì„œ TTL(time-to-live)ì„ ì§§ê²Œ ë‘ê±°ë‚˜ ìºì‹±í•˜ì§€ ì•ŠëŠ” ê²½ìš°ê°€ ë§ŽìŠµë‹ˆë‹¤.

# ë°°í¬ í™˜ê²½

![alt text](cloudfront04.png)(attachment:db914653-f0a2-4b40-9e27-9a48b8ec840d:image.png)

1. AWS ì½˜ì†” â†’ CloudFront
2. CloudFront ìƒì„±ì‹œ Origin ì„¤ì • â‡’ ALB DNS ì´ë¦„ ìž…ë ¥ (ì˜ˆ: `my-alb-123456.ap-northeast-2.elb.amazonaws.com`)
   ì¦‰ originì€ ALBë¥¼ ë°”ë¼ë³´ê³  ìžˆìŒ

CloudFront ë°°í¬ë¥¼ ì„¤ì •í•˜ë©´ `d1234abcd.cloudfront.net` ê°™ì€ ê³ ìœ í•œ ë„ë©”ì¸ì´ ìžë™ìœ¼ë¡œ ë°œê¸‰

ì‚¬ìš©ìž â‡’ CloudFront â‡’ ALB â‡’ ì„œë²„ ì ‘ê·¼

# CloudFrontì˜ ìž¬ë°ŒëŠ” ê¸°ëŠ¥

## **HTTPS ì§€ì› ê¸°ëŠ¥**

![alt text](cloudfront05.jpg)

CloudFrontëŠ” ì˜¤ë¦¬ì§„ì— HTTPSë¥¼ ì§€ì›í•˜ì§€ ì•Šì•„ë„Â HTTPS í†µì‹ ì„ ì•Œì•„ì„œ í•´ì£¼ëŠ” ê¸°ëŠ¥ì´ ìžˆìŠµë‹ˆë‹¤. ì‚¬ìš©ìž ìž…ìž¥ì—ì„œ CloudFrontì™€ë§Œ HTTPS í”„ë¡œí† ì½œ í†µì‹ ì„ í•˜ê³ , ê·¸ ì´í›„ Origin ê¹Œì§€ëŠ” HTTP í”„ë¡œí† ì½œë¡œ í†µì‹ í•˜ëŠ” ê°œë… ìž…ë‹ˆë‹¤.

í•˜ì§€ë§Œ `d1234abcd.cloudfront.net` ì™€ ê°™ì€ cloudfront ë„ë©”ì¸ì„ ê·¸ëŒ€ë¡œ ì“°ëŠ” ê²½ìš°ëŠ” ì—†ê¸° ë•Œë¬¸ì— ê²°êµ­ ì»¤ìŠ¤í…€ ë„ë©”ì¸ì„ ì“°ë ¤ë©´ SSL ì¸ì¦ì„œë¥¼ ë°œê¸‰ ë°›ëŠ” ì ˆì°¨ê°€ í•„ìš” í•©ë‹ˆë‹¤.

## **íŠ¹ì • ì§€ì—­ ì½˜í…ì¸  ì ‘ê·¼ ì œí•œ ê¸°ëŠ¥**

CloudFrontëŠ” ì§€ë¦¬ì  ì œí•œì„ í•  ìˆ˜ ìžˆëŠ” ê¸°ëŠ¥ì´ ìžˆìŠµë‹ˆë‹¤. íšŒì‚¬ì˜ ë¹„ì¦ˆë‹ˆìŠ¤ ì‚¬ì •ìœ¼ë¡œ ì–´ëŠ ì–´ëŠ ë‚˜ë¼ëŠ” ì½˜í…ì¸ ì— ì ‘ê·¼í•  ìˆ˜ ì—†ë„ë¡ êµ¬ì„±í•œë‹¤ë˜ê°€ ì•„ë‹ˆë©´ í•´í‚¹ ë“±ì„ ìš°ë ¤í•˜ì—¬ 1ì°¨ì ìœ¼ë¡œ íŠ¹ì • ë‚˜ë¼ë¡œë¶€í„° ì½˜í…ì¸  ì ‘ê·¼ì„ ì œí•œí•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.

# ê¶ê¸ˆí•œ ì 

## í”„ë¡ íŠ¸ ë°°í¬ì‹œ CloudFrontë¥¼ ì–´ë–»ê²Œ ì‚¬ìš©í•  ìˆ˜ ìžˆì„ê¹Œ, ë™ì  ë°ì´í„°ë„ ìºì‹±ì„ í•  ìˆ˜ ìžˆì„ê¹Œ?

í”„ë¡ íŠ¸ì—”ë“œ ë¹Œë“œ ê²°ê³¼ë¬¼(JS, CSS, ì´ë¯¸ì§€, í°íŠ¸ ë“±)ì„ CloudFront + S3 ì¡°í•©ìœ¼ë¡œ ë°°í¬í•˜ëŠ” ê²Œ ê°€ìž¥ í”í•˜ê³  ì›¹ ì„±ëŠ¥(LCP, FCP ë“±)ì´ í¬ê²Œ í–¥ìƒë ìˆ˜ ìžˆìŒ. í•˜ì§€ë§Œ ë™ì  ì½˜í…ì¸ ë¥¼ ìºì‹±í•˜ê±°ë‚˜ ë¯¸ë””ì–´ ìŠ¤íŠ¸ë¦¬ë° ì„œë¹„ìŠ¤ì™€ ê°™ì€ OTTì„œë¹„ìŠ¤ì—ì„œëŠ” ì„œë²„ ì¸¡ ì¸í”„ë¼ì—ì„œ CloudFrontë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.

> https://docs.aws.amazon.com/ko_kr/AmazonCloudFront/latest/DeveloperGuide/Introduction.html > [https://inpa.tistory.com/entry/AWS-ðŸ“š-CloudFront-ê°œë…-ì›ë¦¬-ì‚¬ìš©-ì„¸íŒ…-ðŸ’¯-ì •ë¦¬](https://inpa.tistory.com/entry/AWS-%F0%9F%93%9A-CloudFront-%EA%B0%9C%EB%85%90-%EC%9B%90%EB%A6%AC-%EC%82%AC%EC%9A%A9-%EC%84%B8%ED%8C%85-%F0%9F%92%AF-%EC%A0%95%EB%A6%AC) > https://bosungtea9416.tistory.com/entry/AWS-CloudFront
